<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market-simulator 市场模拟器</title>
    <style>
        /* 页面布局和样式 */
        body {
            background-color: #f0f7ff; /* 页面背景 */
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 800px;
            width: 100%;
            margin: 40px auto; /* 页面上下居中 */
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #333;
        }

        h2 {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        p {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #555;
        }

        label {
            font-size: 1.1em;
            margin-bottom: 5px;
            display: block;
            text-align: left;
            color: #333;
        }

        select {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1.1em;
            box-sizing: border-box;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #000;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        .summary {
            margin-top: 20px;
            font-size: 1.2em;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
        }

        button {
            width: 100%;
            padding: 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

    </style>
</head>
<body>

<div class="container">
    <h1>Market-simulator <strong>市场模拟器</strong></h1>
    <hr>
    <p class="description">This web is developed for calculating how many resources should prepare to product, including cost and profit margin information.</p>
    <p class="description">这个网站是为了计算应该准备生产多少资源、成本及利润率而开发的。</p>

    <!-- 一级选项 -->
    <label for="primarySelect">请选择机器：</label>
    <select id="primarySelect" onchange="updateSecondaryOptions()">
        <option value="">--请选择--</option>
        <option value="brewing machinery">酿酒机</option>
        <option value="meat slicer">切肉器</option>
        <option value="oven">烤箱</option>
    </select>

    <!-- 二级选项 -->
    <label for="secondarySelect">请选择商品：</label>
    <select id="secondarySelect">
        <option value="">--请选择--</option>
    </select>

    <!-- 显示结果 -->
    <div id="resultArea"></div>

    <button onclick="calculateResults()">计算</button>
</div>

<script>
    // 一级选项对应的二级选项
    const options = {
        "brewing machinery": ["啤酒", "威士忌", "葡萄酒", "香槟"],
        "meat slicer": ["菲力牛排", "香肠", "发酵香肠", "汉堡肉", "条状牛排", "肋眼牛排", "肋排"],
        "oven": ["面包", "曲奇饼干", "姜饼", "派", "椒盐卷饼", "草莓巧克力"]
    };

    // 集中定义所有原材料的购买成本和生产成本
    const materialsInfo = {
        "麦芽": { purchaseCost: 2, productionCost: 1 },
        "酵母": { purchaseCost: 1.5, productionCost: 0.5 },
        "水": { purchaseCost: 0.1, productionCost: 0.05 },
        "谷物": { purchaseCost: 3, productionCost: 1 },
        "牛肉": { purchaseCost: 10, productionCost: 5 },
        "调料": { purchaseCost: 1, productionCost: 0.2 },
        "面粉": { purchaseCost: 2, productionCost: 0.5 },
        "黄油": { purchaseCost: 3, productionCost: 1 },
        "糖": { purchaseCost: 1.2, productionCost: 0.4 }
    };

    // 商品的销售价格
    const productPrices = {
        "啤酒": 30,
        "威士忌": 50,
        "菲力牛排": 80,
        "面包": 15,
        "曲奇饼干": 25
    };

    // 商品对应的原材料及其数量
    const materialsData = {
        "啤酒": [
            { material: "麦芽", quantity: 5 },
            { material: "酵母", quantity: 1 },
            { material: "水", quantity: 10 }
        ],
        "威士忌": [
            { material: "谷物", quantity: 7 },
            { material: "酵母", quantity: 2 },
            { material: "水", quantity: 8 }
        ],
        "菲力牛排": [
            { material: "牛肉", quantity: 1 },
            { material: "调料", quantity: 0.1 }
        ],
        "面包": [
            { material: "面粉", quantity: 3 },
            { material: "酵母", quantity: 1 },
            { material: "水", quantity: 2 }
        ],
        "曲奇饼干": [
            { material: "面粉", quantity: 2 },
            { material: "黄油", quantity: 1 },
            { material: "糖", quantity: 0.5 }
        ]
    };

    // 更新二级选项
    function updateSecondaryOptions() {
        var primarySelect = document.getElementById("primarySelect");
        var secondarySelect = document.getElementById("secondarySelect");
        var selectedValue = primarySelect.value;

        // 清空二级选项
        secondarySelect.innerHTML = '<option value="">--请选择--</option>';

        // 如果有对应的二级选项数据，则更新二级下拉框
        if (selectedValue && options[selectedValue]) {
            var subOptions = options[selectedValue];
            subOptions.forEach(function(option) {
                var newOption = document.createElement("option");
                newOption.value = option;
                newOption.text = option;
                secondarySelect.appendChild(newOption);
            });
        }
    }

    // 显示选定商品的原材料、数量、成本、利润率信息
    function calculateResults() {
        var selectedProduct = document.getElementById('secondarySelect').value;
        var resultArea = document.getElementById('resultArea');

        // 清空之前的结果
        resultArea.innerHTML = "";

        // 检查是否有该商品的原材料数据和销售价格
        if (selectedProduct && materialsData[selectedProduct] && productPrices[selectedProduct]) {
            // 创建表格来显示原材料、数量、成本、利润率
            var tableHTML = "<h2>商品：" + selectedProduct + " 所需原材料及成本</h2>";
            tableHTML += "<table><tr><th>原材料</th><th>数量</th><th>购买成本</th><th>生产成本</th></tr>";

            // 总成本
            let totalPurchaseCost = 0;
            let totalProductionCost = 0;

            // 遍历该商品的原材料列表并添加到表格中
            materialsData[selectedProduct].forEach(function(item) {
                var material = item.material;
                var quantity = item.quantity;
                var purchaseCost = materialsInfo[material].purchaseCost * quantity;
                var productionCost = materialsInfo[material].productionCost * quantity;

                totalPurchaseCost += purchaseCost;
                totalProductionCost += productionCost;

                tableHTML += "<tr><td>" + material + "</td><td>" + quantity + "</td><td>¥" + purchaseCost.toFixed(2) + "</td><td>¥" + productionCost.toFixed(2) + "</td></tr>";
            });

            tableHTML += "<tr><th colspan='2'>总计</th><th>¥" + totalPurchaseCost.toFixed(2) + "</th><th>¥" + totalProductionCost.toFixed(2) + "</th></tr>";
            tableHTML += "</table>";

            // 获取商品的销售价格
            var salesPrice = productPrices[selectedProduct];

            // 计算利润率
            var purchaseProfitMargin = ((salesPrice - totalPurchaseCost) / salesPrice * 100).toFixed(2);
            var productionProfitMargin = ((salesPrice - totalProductionCost) / salesPrice * 100).toFixed(2);

            // 显示销售价格和利润率
            tableHTML += "<div class='summary'><strong>销售价格：</strong>¥" + salesPrice.toFixed(2) + "<br>";
            tableHTML += "<strong>基于购买原材料的利润率：</strong>" + purchaseProfitMargin + "%<br>";
            tableHTML += "<strong>基于生产原材料的利润率：</strong>" + productionProfitMargin + "%</div>";

            // 将表格和总结部分插入到页面中
            resultArea.innerHTML = tableHTML;
        } else {
            resultArea.innerHTML = "<p>没有找到该商品的原材料数据或销售价格。</p>";
        }
    }
</script>

</body>
</html>

